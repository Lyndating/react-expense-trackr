{"ast":null,"code":"var _jsxFileName = \"/Users/tingluo/Projects/Project2/expense-tracker/client/src/components/Transaction/TransactionItem.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Card from '../Card';\nimport './TransactionItem.css';\nimport { Button } from 'react-bootstrap';\nimport TransactionDate from './TransactionDate';\nimport TransactionEdit from './TransactionEdit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TransactionItem = props => {\n  _s();\n\n  console.log(props);\n  const [isEditing, setIsEditing] = useState(false); // const handleToggle= () => {\n  //   setIsEditing(!isEditing);\n  // }\n\n  const showTransactionEdit = () => {\n    setIsEditing(!isEditing);\n  };\n\n  const updateHandler = transactionData => {\n    console.log(transactionData);\n    setIsEditing(false);\n    let token = localStorage.getItem('token');\n    fetch(`http://localhost:3000/transactions/${props.id}.json`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      //body: JSON.stringify({\"transaction\": {\"type_of\": 'expense', amount: 11, title: 'test'}}),\n      body: JSON.stringify({\n        \"transaction\": transactionData\n      })\n    }).then(() => {\n      props.onAddTransaction(transactionData);\n    });\n  };\n\n  const handleDelele = event => {\n    event.preventDefault();\n    console.log(props.id);\n    let token = localStorage.getItem('token');\n    fetch(`http://localhost:3000/transactions/${props.id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => {\n      console.log(response.status);\n      props.onDeleteTransaction(props.id);\n    });\n  };\n\n  const stopEditingHandler = () => {\n    setIsEditing(false);\n  };\n\n  const transactionData = {\n    id: props.id,\n    type_of: props.type,\n    amount: props.amount,\n    title: props.title,\n    description: props.description,\n    receipt: props.url,\n    date: props.date,\n    category_id: Number(props.category_id)\n  };\n  console.log(isEditing);\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    children: [!isEditing && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"transaction-item\",\n      children: [/*#__PURE__*/_jsxDEV(TransactionDate, {\n        date: props.date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"transaction-item__description\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: props.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: props.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: props.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"transaction-item__price\",\n          children: [\"$\", props.amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn btn-info mr-1\",\n          onClick: showTransactionEdit,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn btn-danger\",\n          onClick: handleDelele,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"transaction-item\",\n      children: /*#__PURE__*/_jsxDEV(TransactionEdit, {\n        onCancel: stopEditingHandler,\n        onUpateTransactionData: updateHandler,\n        items: transactionData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 7\n  }, this);\n};\n\n_s(TransactionItem, \"N4qUVpaen/rROL8jPu/4huFD8lA=\");\n\n_c = TransactionItem;\nexport default TransactionItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"TransactionItem\");","map":{"version":3,"sources":["/Users/tingluo/Projects/Project2/expense-tracker/client/src/components/Transaction/TransactionItem.js"],"names":["React","useState","Card","Button","TransactionDate","TransactionEdit","TransactionItem","props","console","log","isEditing","setIsEditing","showTransactionEdit","updateHandler","transactionData","token","localStorage","getItem","fetch","id","method","headers","body","JSON","stringify","then","onAddTransaction","handleDelele","event","preventDefault","response","status","onDeleteTransaction","stopEditingHandler","type_of","type","amount","title","description","receipt","url","date","category_id","Number"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport Card from '../Card'\nimport './TransactionItem.css';\nimport {Button} from 'react-bootstrap';\nimport TransactionDate from './TransactionDate';\nimport TransactionEdit from './TransactionEdit';\n\nconst TransactionItem = (props) => {\n  console.log(props);\n  const [isEditing, setIsEditing] = useState(false);\n\n    // const handleToggle= () => {\n    //   setIsEditing(!isEditing);\n    // }\n\n    const showTransactionEdit = ()=>{\n      setIsEditing(!isEditing);\n    }\n    const updateHandler = (transactionData) => {\n      console.log(transactionData);\n      setIsEditing(false);\n      let token = localStorage.getItem('token');\n      fetch(`http://localhost:3000/transactions/${props.id}.json`, {\n          method: 'POST',\n          headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/json'\n          },\n          //body: JSON.stringify({\"transaction\": {\"type_of\": 'expense', amount: 11, title: 'test'}}),\n          body: JSON.stringify({\"transaction\": transactionData}),\n      }).then(()=>{\n          props.onAddTransaction(transactionData);\n      })   \n\n    }\n\n    const handleDelele = (event) => {\n      event.preventDefault();\n      console.log(props.id)\n      let token = localStorage.getItem('token')\n      fetch(`http://localhost:3000/transactions/${props.id}`, {\n          method: 'DELETE',\n          headers: {  \n            'Authorization': `Bearer ${token}`\n          }\n      })\n      .then(response => {\n        console.log(response.status)\n        props.onDeleteTransaction(props.id)\n      })\n    }\n\n    const stopEditingHandler = ()=>{\n      setIsEditing(false);\n    }\n    const transactionData = {\n        id: props.id,\n        type_of: props.type,\n        amount: props.amount, \n        title: props.title,\n        description: props.description,  \n        receipt: props.url, \n        date: props.date,\n        category_id: Number(props.category_id),\n    }\n    console.log(isEditing);\n    return (\n      <li>\n        {!isEditing && \n          <Card className='transaction-item'>\n            <TransactionDate date={props.date} />\n            <div className='transaction-item__description'>\n              <h3>{props.type}</h3>\n              <h4>{props.title}</h4>\n              <span>{props.description}</span>\n              <div className='transaction-item__price'>${props.amount}</div>\n            </div>\n            <div>\n            <Button className='btn btn-info mr-1'onClick={showTransactionEdit}>Edit</Button>\n              <Button className='btn btn-danger' onClick={handleDelele}>Delete</Button>\n\n\n            </div>\n          </Card>\n        }\n        {isEditing &&\n          <Card className='transaction-item'>\n            <TransactionEdit onCancel={stopEditingHandler} onUpateTransactionData={updateHandler} items={transactionData}/>\n          </Card>\n        } \n      </li>\n    );\n  };\n  \n  export default TransactionItem;"]},"metadata":{},"sourceType":"module"}