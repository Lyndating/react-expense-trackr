{"ast":null,"code":"var _jsxFileName = \"/Users/tingluo/Projects/Project2/expense-tracker/client/src/components/Transaction/TransactionForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Form, Row, Col, Button } from 'react-bootstrap';\nimport createRequest from '../../request';\nimport DatePicker from 'react-date-picker'; // import {CloudinaryContext} from 'cloudinary-react';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TransactionForm = props => {\n  _s();\n\n  console.log(props);\n  const [enteredDescription, setEnteredDescription] = useState('');\n  const [enteredAmount, setEnteredAmount] = useState('');\n  const [enteredDate, setEnteredDate] = useState('');\n  const [enteredTitle, setEnteredTitle] = useState('');\n  const [enteredType, setEnteredType] = useState('Expense');\n  const [enteredCategory, setEnteredCategory] = useState('');\n  const [url, setUrl] = useState('');\n  const [categoryList, setCategoryList] = useState([]); //check validation\n\n  const [formIsValid, setFormISValid] = useState(true);\n\n  const uploadImage = e => {\n    setFormISValid(false);\n    const image = e.target.files[0];\n    const data = new FormData();\n    data.append('file', image);\n    data.append('upload_preset', 'ese6jnd3');\n    data.append(\"cloud_name\", 'dgpwctfjt');\n    fetch(\"https://api.cloudinary.com/v1_1/dgpwctfjt/image/upload\", {\n      method: 'post',\n      body: data\n    }).then(resp => resp.json()).then(data => {\n      setUrl(data.url);\n      setFormISValid(true);\n\n      if (data.url) {\n        setFormISValid(true);\n      }\n    });\n  };\n\n  const input = '/categories.json';\n  useEffect(() => {\n    const fetchCategories = async () => {\n      createRequest(input).then(data => {\n        console.log(data);\n        setCategoryList(data);\n      });\n    };\n\n    const timer = setTimeout(() => {\n      fetchCategories();\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, [input]);\n\n  const submitHandler = event => {\n    event.preventDefault(); // if (enteredAmount.trim()===\"\") {\n    //     setAmountIsValid(false);\n    //     return;\n    // }\n    // setAmountIsValid(true);\n\n    const transactionData = {\n      type_of: enteredType,\n      amount: enteredAmount,\n      title: enteredTitle,\n      description: enteredDescription,\n      receipt: url,\n      date: enteredDate,\n      category_id: Number(enteredCategory)\n    };\n    props.onSaveTransactionData(transactionData);\n    setEnteredDescription('');\n    setEnteredAmount('');\n    setEnteredDate('');\n    setFormISValid(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submitHandler,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 4,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n          value: enteredCategory,\n          onChange: e => setEnteredCategory(e.target.value),\n          children: categoryList.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: category.id,\n            children: category.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 4,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n          className: \"form-control\",\n          selected: enteredDate,\n          format: \"yyyy/MM/dd HH:mm\",\n          maxDate: new Date(),\n          isClearable: true,\n          showYearDropdown: true,\n          showTimeSelect: true,\n          closeCalendar: true,\n          onChange: date => setEnteredDate(date),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        sm: 3,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Income/Expense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n          value: enteredType,\n          onChange: e => setEnteredType(e.target.value),\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"expense\",\n            children: \"Expense\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"income\",\n            children: \"Income\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        sm: 3,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"Title\",\n          value: enteredTitle,\n          onChange: e => setEnteredTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        sm: 2,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"number\",\n          value: enteredAmount,\n          min: \"0.01\",\n          step: \"0.01\",\n          onChange: e => setEnteredAmount(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        sm: 4,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          value: enteredDescription,\n          onChange: e => setEnteredDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 2,\n        className: \"my-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"file\",\n          onChange: uploadImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        xs: \"auto\",\n        className: \"my-1\",\n        children: [formIsValid && /*#__PURE__*/_jsxDEV(Button, {\n          className: \"my-1\",\n          type: \"submit\",\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this), !formIsValid && /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          disabled: true,\n          children: \"Uploading..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          onClick: props.onCancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TransactionForm, \"8rm7s9F6SC6Y3xThBjUcsA2ztPk=\");\n\n_c = TransactionForm;\nexport default TransactionForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"TransactionForm\");","map":{"version":3,"sources":["/Users/tingluo/Projects/Project2/expense-tracker/client/src/components/Transaction/TransactionForm.js"],"names":["React","useState","useEffect","Form","Row","Col","Button","createRequest","DatePicker","TransactionForm","props","console","log","enteredDescription","setEnteredDescription","enteredAmount","setEnteredAmount","enteredDate","setEnteredDate","enteredTitle","setEnteredTitle","enteredType","setEnteredType","enteredCategory","setEnteredCategory","url","setUrl","categoryList","setCategoryList","formIsValid","setFormISValid","uploadImage","e","image","target","files","data","FormData","append","fetch","method","body","then","resp","json","input","fetchCategories","timer","setTimeout","clearTimeout","submitHandler","event","preventDefault","transactionData","type_of","amount","title","description","receipt","date","category_id","Number","onSaveTransactionData","value","map","category","id","name","Date","onCancel"],"mappings":"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","sourcesContent":["\nimport React, {useState, useEffect} from 'react';\nimport { Form , Row, Col, Button } from 'react-bootstrap';\nimport createRequest from '../../request';\nimport DatePicker from 'react-date-picker';\n// import {CloudinaryContext} from 'cloudinary-react';\n\nconst TransactionForm = (props)=>{\n    console.log(props);\n    const [enteredDescription, setEnteredDescription] = useState('');\n    const [enteredAmount, setEnteredAmount] = useState('');\n    const [enteredDate, setEnteredDate] = useState('');\n    const [enteredTitle, setEnteredTitle] = useState('');\n    const [enteredType, setEnteredType] = useState('Expense');\n    const [enteredCategory, setEnteredCategory]=useState('');\n    const [url, setUrl] = useState('');\n    const [categoryList, setCategoryList] = useState([]); \n    //check validation\n    const [formIsValid, setFormISValid] = useState(true);\n\n\n    const uploadImage =(e) => {\n        setFormISValid(false);\n        const image = e.target.files[0];\n        const data = new FormData();\n        data.append('file', image)\n        data.append('upload_preset', 'ese6jnd3')\n        data.append(\"cloud_name\", 'dgpwctfjt')\n        fetch(\"https://api.cloudinary.com/v1_1/dgpwctfjt/image/upload\",{\n            method: 'post',\n            body: data\n        }).then(resp => \n            resp.json()\n        ).then(data => {\n            setUrl(data.url);\n            setFormISValid(true);\n            if (data.url){\n                setFormISValid(true);\n            }\n        })\n    }\n    \n    \n    const input = '/categories.json';\n    useEffect(()=>{\n        const fetchCategories = async() => { \n            createRequest(input).then((data)=> {\n                console.log(data);\n                setCategoryList(data);       \n                })\n        }\n        \n        const timer = setTimeout(()=>{\n            fetchCategories();\n        }, 1000);\n        return () => clearTimeout(timer);    \n    }, [input]);\n\n    const submitHandler =(event) => {\n        event.preventDefault();  \n\n        // if (enteredAmount.trim()===\"\") {\n        //     setAmountIsValid(false);\n        //     return;\n        // }\n        // setAmountIsValid(true);\n        const transactionData = {\n            type_of: enteredType,\n            amount: enteredAmount, \n            title: enteredTitle,\n            description: enteredDescription,  \n            receipt: url, \n            date: enteredDate,\n            category_id: Number(enteredCategory),\n        };\n        props.onSaveTransactionData(transactionData);\n        setEnteredDescription('');\n        setEnteredAmount('');\n        setEnteredDate('');\n        setFormISValid(false);\n    }\n\n    return (\n\n    <form onSubmit={submitHandler}>\n        <Row className=\"align-items-center\">\n            <Col sm={4} className=\"my-1\">\n                <label>Category</label>\n                <Form.Select value={enteredCategory} onChange={(e)=>setEnteredCategory(e.target.value)}>\n                {categoryList.map(category => (\n                        <option value={category.id}>{category.name}</option>\n                ))}\n                </Form.Select>\n            </Col>\n        </Row>\n        <Row className=\"align-items-center\">\n            <Col sm={4} className=\"my-1\">\n                <label>Date</label>\n                <DatePicker className='form-control'\n                    selected={enteredDate} \n                    format=\"yyyy/MM/dd HH:mm\" \n                    maxDate={new Date()}\n                    isClearable\n                    showYearDropdown\n                    showTimeSelect\n                    closeCalendar\n                    onChange={(date)=> setEnteredDate(date)}required/>\n            </Col>\n        </Row>\n        <Row className=\"align-items-center\">\n            <Col sm={3} className=\"my-1\">\n                <label>Income/Expense</label>\n                <Form.Select value={enteredType} onChange={(e) => setEnteredType(e.target.value)} required>\n                <option value=\"\">Select Type</option>\n                <option value=\"expense\">Expense</option>\n                <option value=\"income\">Income</option>\n                </Form.Select>\n            </Col>  \n\n            <Col sm={3} className=\"my-1\">\n                <label>Title</label>\n                <Form.Control type=\"Title\" value={enteredTitle} onChange={(e)=> setEnteredTitle(e.target.value)}/>\n            </Col>\n\n            <Col sm={2} className=\"my-1\">\n                <label>Amount</label>\n                <Form.Control type=\"number\" value={enteredAmount} min=\"0.01\" step=\"0.01\" onChange={(e) => setEnteredAmount(e.target.value)}/>\n                {/* {!amountIsValid && <p className='error-text'>Please enter an amount </p>} */}\n            </Col>\n\n            <Col sm={4} className=\"my-1\">\n                <label>Description</label>\n                <Form.Control type=\"text\" value={enteredDescription} onChange={(e)=> setEnteredDescription(e.target.value)}/>\n            </Col>\n            </Row>\n            <Row className=\"align-items-center\">\n            <Col sm={2} className=\"my-1\">\n                <label>Upload</label>\n                <Form.Control type=\"file\" onChange={uploadImage}/>\n            </Col>\n            </Row>\n            <Row className=\"align-items-center\">\n            <Col xs=\"auto\" className='my-1'>\n                {formIsValid &&\n                    <Button className ='my-1'type=\"submit\">Add</Button>\n                }\n                {!formIsValid &&\n                    <Button type=\"submit\" disabled>Uploading..</Button>\n                }\n                \n                <Button type=\"button\" onClick={props.onCancel}>Cancel</Button>\n            </Col>\n            </Row>\n    </form>\n    );\n};\n\nexport default TransactionForm;"]},"metadata":{},"sourceType":"module"}